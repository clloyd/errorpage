<head>
  <title>Extension Test Page</title>
</head>

<body>
	<div style="padding-bottom: 20px;">
		<button id="senderror">Send Unknown Error</button>
	</div>
	<div>
		<a href="https://chrome.google.com/webstore/detail/app-communication-simulat/mgfkmgfjilkedgklmgcfpkpmbakpnkcc">Download the Chrome Extension</a>
	</div>



<script id="errorJSON" type="application/json">
    {
      "message": "An Unknown Error has occurred" ,
      "code": 1234,
      "sessionID": "ThisisAMadeUpSessionID04"
    }
</script>

<script type="text/javascript">

  function sendErrorToApplication(error) {
    'use strict';

    if (error) {

      var urlString = Object.keys(error).map(function(key){
        return encodeURIComponent(key) + '=' + encodeURIComponent(error[key]);
      }).join('&');

      window.location = window.location.origin + window.location.pathname.substring(0, window.location.pathname.length -1) + '?type=error&' + urlString;
    }
  }

  var errorEl = document.getElementById('errorJSON');

  if (errorEl) {
    var error = JSON.parse(errorEl.innerHTML);
    document.getElementById('senderror').addEventListener('click', function() {
      'use strict';

      sendErrorToApplication(error);
    });
  }
</script>
</body>
